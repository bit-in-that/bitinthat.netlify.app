{
  "hash": "a3d4f9a658384a0d99e8c5695776c8b0",
  "result": {
    "markdown": "---\ntitle: \"Odin Jones\"\nfreeze: true\nparams:\n  player_first_name: \"Odin\"\n  player_surname: \"Jones\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(reactable)\nlibrary(arrow)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(purrr)\nlibrary(htmltools)\nlibrary(stringr)\n\ncombine_player_details <- read_parquet(\"https://github.com/bit-in-that/data-automation/raw/main/players/data/processed/combine_player_details.parquet\") |> \n  filter(player_first_name == params$player_first_name, player_surname == params$player_surname)\n\nplayerIds <- combine_player_details$playerIds[[1]]\n\nseason_data_table <- read_parquet(\"../../../_tempates/draft_prospects/season_data_table.parquet\") |> \n  filter(\n    playerId %in% playerIds\n  )\n\nmatch_data_table <- read_parquet(\"../../../_tempates/draft_prospects/match_data_table.parquet\") |> \n  filter(\n    playerId %in% playerIds\n  )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncreate_html_table <- function(row_list) {\n  row_list <- row_list |> \n    imap(~{\n      tags$tr(\n        tags$td(tags$b(paste0(.y, \":\"))),\n        tags$td(.x)\n      )\n    })\n  \n  # do.call(tags$table, row_list)\n  tags$table(row_list)\n}\n```\n:::\n\n\n\n::: {.callout-warning}\n\n### Data Disclaimer\n\nNote that data for the interstate underage competition (\"AFL U18 Championships\") are missing behind and free kick data, as such these items are omitted from the calculation of fantasy points and left blank in any tables they are present in.\n\n:::\n\n## Player Details\n\n\n::: {.callout-tip collapse=\"true\"}\n\n### Images\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncombine_player_details$player_images[[1]] |> \n  map(~tags$img(src = .x)) |> \n  tags$span()\n```\n\n::: {.cell-output-display}\n```{=html}\n<span>\n<img src=\"https://s3-ap-southeast-2.amazonaws.com/sportix-storage/players/thumbs/odin-jones-rtRKy.png\"/>\n</span>\n```\n:::\n:::\n\n\n:::\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncombine_player_details |> \n  transmute(\n    `Date of Birth` = date_of_birth, State = state, `State League Club` = state_league_club,\n    `Community Club` = community_club, Height = paste0(player_height_range, \"cm\"), Weight = paste0(player_weight_range, \"kg\"),\n    Urls = player_urls |> map(~{\n      link_labels <- case_when(\n        str_detect(.x, \"wafl.com.au\") ~ \"WAFL\",\n        str_detect(.x,\"central.rookieme.com\") ~ \"Rookie Me Central\",\n        str_detect(.x, \"www.afl.com.au\") ~ \"AFL\",\n        str_detect(.x, \"sanfl.com.au\") ~ \"SANFL\"\n      )\n      \n      map2(.x, link_labels, \\(player_url, link_label) {\n        p(\n          tags$a(\n            link_label, href = player_url, target = \"_blank\"\n          )\n        )\n      })\n    }),\n    `Phantom Draft Ranking (Afl)` = phantom_draft_afl, \n    `Phantom Draft Ranking (Sporting News)` = phantom_draft_sporting_news, \n    `Phantom Draft Ranking (Fox Sports)` = phantom_draft_fox_sports, \n    `Phantom Draft Ranking (Abc)` = phantom_draft_abc\n  ) |> \n  create_html_table()\n```\n\n::: {.cell-output-display}\n```{=html}\n<table>\n<tr>\n<td>\n<b>Date of Birth:</b>\n</td>\n<td>2005-09-20</td>\n</tr>\n<tr>\n<td>\n<b>State:</b>\n</td>\n<td>WA</td>\n</tr>\n<tr>\n<td>\n<b>State League Club:</b>\n</td>\n<td>West Perth</td>\n</tr>\n<tr>\n<td>\n<b>Community Club:</b>\n</td>\n<td>Joondalup Kinross</td>\n</tr>\n<tr>\n<td>\n<b>Height:</b>\n</td>\n<td>197cm</td>\n</tr>\n<tr>\n<td>\n<b>Weight:</b>\n</td>\n<td>NAkg</td>\n</tr>\n<tr>\n<td>\n<b>Urls:</b>\n</td>\n<td>\n<p>\n<a href=\"https://wafl.com.au/player/odin-jones\" target=\"_blank\">WAFL</a>\n</p>\n<p>\n<a href=\"https://www.afl.com.au/draft/prospect/2023?playerId=CD_I1028371\" target=\"_blank\">AFL</a>\n</p>\n</td>\n</tr>\n<tr>\n<td>\n<b>Phantom Draft Ranking (Afl):</b>\n</td>\n<td>NA</td>\n</tr>\n<tr>\n<td>\n<b>Phantom Draft Ranking (Sporting News):</b>\n</td>\n<td>NA</td>\n</tr>\n<tr>\n<td>\n<b>Phantom Draft Ranking (Fox Sports):</b>\n</td>\n<td>NA</td>\n</tr>\n<tr>\n<td>\n<b>Phantom Draft Ranking (Abc):</b>\n</td>\n<td>NA</td>\n</tr>\n</table>\n```\n:::\n:::\n\n\n\n## Seasons\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nseason_data_table |> \n  select(-playerId) |> \n  reactable(\n    columns = list(\n      season = colDef(name = \"Season\", sticky = \"left\"),\n      tier = colDef(name = \"Tier\", sticky = \"left\"),\n      comp_name = colDef(name = \"Competition\"),\n      games_played = colDef(name = \"Games\"),\n      fantasy_ceiling = colDef(name = \"Ceiling\"),\n      fantasy_floor = colDef(name = \"Floor\"),\n      fantasy_points = colDef(name = \"Average\", format = colFormat(digits = 1)),\n      goals = colDef(name = \"Goals\", format = colFormat(digits = 1)),\n      behinds = colDef(name = \"Behinds\", format = colFormat(digits = 1)),\n      kicks = colDef(name = \"Kicks\", format = colFormat(digits = 1)),\n      handballs = colDef(name = \"Handballs\", format = colFormat(digits = 1)),\n      disposals = colDef(name = \"Disposals\", format = colFormat(digits = 1)),\n      marks = colDef(name = \"Marks\", format = colFormat(digits = 1)),\n      tackles = colDef(name = \"Tackles\", format = colFormat(digits = 1)),\n      hitouts = colDef(name = \"Hitouts\", format = colFormat(digits = 1)),\n      frees_for = colDef(name = \"Frees For\", format = colFormat(digits = 1)),\n      frees_against = colDef(name = \"Frees Against\", format = colFormat(digits = 1))\n    ),\n    columnGroups = list(\n      colGroup(name = \"AFL Fantasy\", columns = c(\"fantasy_ceiling\", \"fantasy_floor\", \"fantasy_points\")),\n      colGroup(name = \"Average Stats\", columns = c(\"goals\", \"behinds\", \"kicks\", \"handballs\", \"disposals\", \"marks\", \"tackles\", \"hitouts\", \"frees_for\", \"frees_against\"))\n    ),\n    filterable = TRUE\n  )\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"reactable html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-aac95799617bbc3a06dc\" style=\"width:auto;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-aac95799617bbc3a06dc\">{\"x\":{\"tag\":{\"name\":\"Reactable\",\"attribs\":{\"data\":{\"season\":[2023],\"tier\":[\"State Underage\"],\"comp_name\":[\"WAFL Colts\"],\"games_played\":[9],\"fantasy_ceiling\":[127],\"fantasy_floor\":[38],\"fantasy_points\":[81.333333333333329],\"goals\":[0.77777777777777779],\"behinds\":[0.22222222222222221],\"kicks\":[9.4444444444444446],\"handballs\":[6.2222222222222223],\"disposals\":[15.666666666666666],\"marks\":[3.5555555555555554],\"tackles\":[2.6666666666666665],\"hitouts\":[18.111111111111111],\"frees_for\":[2.2222222222222223],\"frees_against\":[2]},\"columns\":[{\"id\":\"season\",\"name\":\"Season\",\"type\":\"numeric\",\"sticky\":\"left\"},{\"id\":\"tier\",\"name\":\"Tier\",\"type\":\"character\",\"sticky\":\"left\"},{\"id\":\"comp_name\",\"name\":\"Competition\",\"type\":\"character\"},{\"id\":\"games_played\",\"name\":\"Games\",\"type\":\"numeric\"},{\"id\":\"fantasy_ceiling\",\"name\":\"Ceiling\",\"type\":\"numeric\"},{\"id\":\"fantasy_floor\",\"name\":\"Floor\",\"type\":\"numeric\"},{\"id\":\"fantasy_points\",\"name\":\"Average\",\"type\":\"numeric\",\"format\":{\"cell\":{\"digits\":1},\"aggregated\":{\"digits\":1}}},{\"id\":\"goals\",\"name\":\"Goals\",\"type\":\"numeric\",\"format\":{\"cell\":{\"digits\":1},\"aggregated\":{\"digits\":1}}},{\"id\":\"behinds\",\"name\":\"Behinds\",\"type\":\"numeric\",\"format\":{\"cell\":{\"digits\":1},\"aggregated\":{\"digits\":1}}},{\"id\":\"kicks\",\"name\":\"Kicks\",\"type\":\"numeric\",\"format\":{\"cell\":{\"digits\":1},\"aggregated\":{\"digits\":1}}},{\"id\":\"handballs\",\"name\":\"Handballs\",\"type\":\"numeric\",\"format\":{\"cell\":{\"digits\":1},\"aggregated\":{\"digits\":1}}},{\"id\":\"disposals\",\"name\":\"Disposals\",\"type\":\"numeric\",\"format\":{\"cell\":{\"digits\":1},\"aggregated\":{\"digits\":1}}},{\"id\":\"marks\",\"name\":\"Marks\",\"type\":\"numeric\",\"format\":{\"cell\":{\"digits\":1},\"aggregated\":{\"digits\":1}}},{\"id\":\"tackles\",\"name\":\"Tackles\",\"type\":\"numeric\",\"format\":{\"cell\":{\"digits\":1},\"aggregated\":{\"digits\":1}}},{\"id\":\"hitouts\",\"name\":\"Hitouts\",\"type\":\"numeric\",\"format\":{\"cell\":{\"digits\":1},\"aggregated\":{\"digits\":1}}},{\"id\":\"frees_for\",\"name\":\"Frees For\",\"type\":\"numeric\",\"format\":{\"cell\":{\"digits\":1},\"aggregated\":{\"digits\":1}}},{\"id\":\"frees_against\",\"name\":\"Frees Against\",\"type\":\"numeric\",\"format\":{\"cell\":{\"digits\":1},\"aggregated\":{\"digits\":1}}}],\"columnGroups\":[{\"name\":\"AFL Fantasy\",\"columns\":[\"fantasy_ceiling\",\"fantasy_floor\",\"fantasy_points\"]},{\"name\":\"Average Stats\",\"columns\":[\"goals\",\"behinds\",\"kicks\",\"handballs\",\"disposals\",\"marks\",\"tackles\",\"hitouts\",\"frees_for\",\"frees_against\"]}],\"filterable\":true,\"dataKey\":\"4ec21b73dfc1fae5d36800ba146d57bd\"},\"children\":[]},\"class\":\"reactR_markup\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n\n## Matches\n\nNote that times below are (unfortunately) in Sydney/Melbourne time (in future I would like to make them local time instead).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmatch_data_table |> \n  select(-playerId) |> \n  reactable(\n    columns = list(\n      match_time = colDef(\n        name = \"Time\", sticky = \"left\", cell = function(cell_value, row_index, column_name){\n          match_url <- match_data_table[[\"match_url\"]][[row_index]]\n          tags$a(\n            format(cell_value, format = \"%e/%m/%Y\\n%I:%M %p\", tz = \"Australia/Melbourne\"),\n            href = match_url,\n            target = \"_blank\"\n          )\n        }\n      ),\n      match_url = colDef(show = FALSE),\n      is_home = colDef(show = FALSE),\n      team_name = colDef(name = \"Team\"),\n      opposition_name = colDef(name = \"Opposition\", cell = function(cell_value, row_index, column_name){\n        is_home <- match_data_table[[\"is_home\"]][[row_index]]\n        if(is_home) {\n          paste(\"vs.\", cell_value)\n        } else {\n          paste(\"@\", cell_value)\n        }\n      }),\n      tier = colDef(name = \"Tier\"),\n      match_type = colDef(name = \"Type\"),\n      round_abbreviation = colDef(name = \"Round\"),\n      comp_name = colDef(name = \"Competition\"),\n      position = colDef(name = \"Position\"),\n      fantasy_points = colDef(name = \"Fantasy Points\"),\n      goals = colDef(name = \"Goals\"),\n      behinds = colDef(name = \"Behinds\"),\n      kicks = colDef(name = \"Kicks\"),\n      handballs = colDef(name = \"Handballs\"),\n      disposals = colDef(name = \"Disposals\"),\n      marks = colDef(name = \"Marks\"),\n      tackles = colDef(name = \"Tackles\"),\n      hitouts = colDef(name = \"Hitouts\"),\n      frees_for = colDef(name = \"Frees For\"),\n      frees_against = colDef(name = \"Frees Against\")\n    ),\n    columnGroups = list(\n      colGroup(name = \"Match Info\", columns = c(\"tier\", \"comp_name\", \"match_type\", \"round_abbreviation\", \"team_name\", \"opposition_name\")),\n      colGroup(name = \"Average Stats\", columns = c(\"fantasy_points\", \"goals\", \"behinds\", \"kicks\", \"handballs\", \"disposals\", \"marks\", \"tackles\", \"hitouts\", \"frees_for\", \"frees_against\"))\n    ),\n    filterable = TRUE,\n    pagination = FALSE,\n    height = 750\n  )\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-9ceffec20a7741c87eb5\" class=\"reactable html-widget \" style=\"width:auto;height:750px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-9ceffec20a7741c87eb5\">{\"x\":{\"tag\":{\"name\":\"Reactable\",\"attribs\":{\"data\":{\"match_time\":[\"2023-09-02T01:00:00Z\",\"2023-08-26T01:40:00Z\",\"2023-08-19T01:10:00Z\",\"2023-08-05T01:10:00Z\",\"2023-07-22T01:10:00Z\",\"2023-05-13T01:10:00Z\",\"2023-04-29T04:30:00Z\",\"2023-04-23T00:40:00Z\",\"2023-04-07T00:40:00Z\"],\"tier\":[\"State Underage\",\"State Underage\",\"State Underage\",\"State Underage\",\"State Underage\",\"State Underage\",\"State Underage\",\"State Underage\",\"State Underage\"],\"comp_name\":[\"WAFL Colts 2023\",\"WAFL Colts 2023\",\"WAFL Colts 2023\",\"WAFL Colts 2023\",\"WAFL Colts 2023\",\"WAFL Colts 2023\",\"WAFL Colts 2023\",\"WAFL Colts 2023\",\"WAFL Colts 2023\"],\"match_url\":[\"https://wafl.com.au/match/colts-subiaco-v-west-perth-finals-week-1-2023\",\"https://wafl.com.au/match/colts-west-perth-v-east-perth-round-20-2023\",\"https://wafl.com.au/match/colts-peel-thunder-v-west-perth-round-19-2023\",\"https://wafl.com.au/match/colts-west-perth-v-perth-round-17-2023\",\"https://wafl.com.au/match/colts-claremont-v-west-perth-round-15-2023\",\"https://wafl.com.au/match/colts-perth-v-west-perth-round-6-2023\",\"https://wafl.com.au/match/colts-west-perth-v-subiaco-round-4-2023\",\"https://wafl.com.au/match/colts-swan-districts-v-west-perth-round-3-2023\",\"https://wafl.com.au/match/colts-west-perth-v-claremont-round-1-2023\"],\"match_type\":[\"Final\",\"Regular\",\"Regular\",\"Regular\",\"Regular\",\"Regular\",\"Regular\",\"Regular\",\"Regular\"],\"round_abbreviation\":[\"FW1\",\"Rd 20\",\"Rd 19\",\"Rd 17\",\"Rd 15\",\"Rd 6\",\"Rd 4\",\"Rd 3\",\"Rd 1\"],\"is_home\":[false,true,false,true,false,false,true,false,true],\"team_name\":[\"West Perth\",\"West Perth\",\"West Perth\",\"West Perth\",\"West Perth\",\"West Perth\",\"West Perth\",\"West Perth\",\"West Perth\"],\"opposition_name\":[\"Subiaco\",\"East Perth\",\"Peel Thunder\",\"Perth\",\"Claremont\",\"Perth\",\"Subiaco\",\"Swan Districts\",\"Claremont\"],\"position\":[null,null,null,null,null,null,null,null,null],\"fantasy_points\":[104,127,61,68,110,99,38,68,57],\"goals\":[0,0,1,1,2,0,2,1,0],\"behinds\":[0,0,0,1,0,0,1,0,0],\"kicks\":[12,15,4,7,12,12,4,9,10],\"handballs\":[5,9,7,3,10,8,2,9,3],\"disposals\":[17,24,11,10,22,20,6,18,13],\"marks\":[4,6,1,4,1,4,3,5,4],\"tackles\":[5,4,1,2,5,3,1,1,2],\"hitouts\":[25,30,26,15,17,21,2,13,14],\"frees_for\":[1,3,2,2,5,5,0,0,2],\"frees_against\":[0,1,2,1,1,1,2,5,5]},\"columns\":[{\"id\":\"match_time\",\"name\":\"Time\",\"type\":\"Date\",\"cell\":[{\"name\":\"a\",\"attribs\":{\"href\":\"https://wafl.com.au/match/colts-subiaco-v-west-perth-finals-week-1-2023\",\"target\":\"_blank\"},\"children\":[\" 2/09/2023\\n11:00 AM\"]},{\"name\":\"a\",\"attribs\":{\"href\":\"https://wafl.com.au/match/colts-west-perth-v-east-perth-round-20-2023\",\"target\":\"_blank\"},\"children\":[\"26/08/2023\\n11:40 AM\"]},{\"name\":\"a\",\"attribs\":{\"href\":\"https://wafl.com.au/match/colts-peel-thunder-v-west-perth-round-19-2023\",\"target\":\"_blank\"},\"children\":[\"19/08/2023\\n11:10 AM\"]},{\"name\":\"a\",\"attribs\":{\"href\":\"https://wafl.com.au/match/colts-west-perth-v-perth-round-17-2023\",\"target\":\"_blank\"},\"children\":[\" 5/08/2023\\n11:10 AM\"]},{\"name\":\"a\",\"attribs\":{\"href\":\"https://wafl.com.au/match/colts-claremont-v-west-perth-round-15-2023\",\"target\":\"_blank\"},\"children\":[\"22/07/2023\\n11:10 AM\"]},{\"name\":\"a\",\"attribs\":{\"href\":\"https://wafl.com.au/match/colts-perth-v-west-perth-round-6-2023\",\"target\":\"_blank\"},\"children\":[\"13/05/2023\\n11:10 AM\"]},{\"name\":\"a\",\"attribs\":{\"href\":\"https://wafl.com.au/match/colts-west-perth-v-subiaco-round-4-2023\",\"target\":\"_blank\"},\"children\":[\"29/04/2023\\n02:30 PM\"]},{\"name\":\"a\",\"attribs\":{\"href\":\"https://wafl.com.au/match/colts-swan-districts-v-west-perth-round-3-2023\",\"target\":\"_blank\"},\"children\":[\"23/04/2023\\n10:40 AM\"]},{\"name\":\"a\",\"attribs\":{\"href\":\"https://wafl.com.au/match/colts-west-perth-v-claremont-round-1-2023\",\"target\":\"_blank\"},\"children\":[\" 7/04/2023\\n10:40 AM\"]}],\"sticky\":\"left\"},{\"id\":\"tier\",\"name\":\"Tier\",\"type\":\"character\"},{\"id\":\"comp_name\",\"name\":\"Competition\",\"type\":\"character\"},{\"id\":\"match_url\",\"name\":\"match_url\",\"type\":\"character\",\"show\":false},{\"id\":\"match_type\",\"name\":\"Type\",\"type\":\"character\"},{\"id\":\"round_abbreviation\",\"name\":\"Round\",\"type\":\"character\"},{\"id\":\"is_home\",\"name\":\"is_home\",\"type\":\"logical\",\"show\":false},{\"id\":\"team_name\",\"name\":\"Team\",\"type\":\"character\"},{\"id\":\"opposition_name\",\"name\":\"Opposition\",\"type\":\"character\",\"cell\":[\"@ Subiaco\",\"vs. East Perth\",\"@ Peel Thunder\",\"vs. Perth\",\"@ Claremont\",\"@ Perth\",\"vs. Subiaco\",\"@ Swan Districts\",\"vs. Claremont\"]},{\"id\":\"position\",\"name\":\"Position\",\"type\":\"character\"},{\"id\":\"fantasy_points\",\"name\":\"Fantasy Points\",\"type\":\"numeric\"},{\"id\":\"goals\",\"name\":\"Goals\",\"type\":\"numeric\"},{\"id\":\"behinds\",\"name\":\"Behinds\",\"type\":\"numeric\"},{\"id\":\"kicks\",\"name\":\"Kicks\",\"type\":\"numeric\"},{\"id\":\"handballs\",\"name\":\"Handballs\",\"type\":\"numeric\"},{\"id\":\"disposals\",\"name\":\"Disposals\",\"type\":\"numeric\"},{\"id\":\"marks\",\"name\":\"Marks\",\"type\":\"numeric\"},{\"id\":\"tackles\",\"name\":\"Tackles\",\"type\":\"numeric\"},{\"id\":\"hitouts\",\"name\":\"Hitouts\",\"type\":\"numeric\"},{\"id\":\"frees_for\",\"name\":\"Frees For\",\"type\":\"numeric\"},{\"id\":\"frees_against\",\"name\":\"Frees Against\",\"type\":\"numeric\"}],\"columnGroups\":[{\"name\":\"Match Info\",\"columns\":[\"tier\",\"comp_name\",\"match_type\",\"round_abbreviation\",\"team_name\",\"opposition_name\"]},{\"name\":\"Average Stats\",\"columns\":[\"fantasy_points\",\"goals\",\"behinds\",\"kicks\",\"handballs\",\"disposals\",\"marks\",\"tackles\",\"hitouts\",\"frees_for\",\"frees_against\"]}],\"filterable\":true,\"pagination\":false,\"height\":\"750px\",\"dataKey\":\"9ecb873c052e6b6a5549ded47be53703\"},\"children\":[]},\"class\":\"reactR_markup\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../../site_libs/core-js-2.5.3/shim.min.js\"></script>\n<script src=\"../../../site_libs/react-17.0.0/react.min.js\"></script>\n<script src=\"../../../site_libs/react-17.0.0/react-dom.min.js\"></script>\n<script src=\"../../../site_libs/reactwidget-1.0.0/react-tools.js\"></script>\n<script src=\"../../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<link href=\"../../../site_libs/reactable-0.4.4/reactable.css\" rel=\"stylesheet\" />\n<script src=\"../../../site_libs/reactable-binding-0.4.4/reactable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}